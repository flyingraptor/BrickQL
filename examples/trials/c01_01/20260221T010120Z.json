{
  "case_id": "c01_01",
  "category": "basic_select",
  "question": "List the name and industry of all active companies.",
  "case_notes": "Simplest possible query. Active is stored as INTEGER (1=true) in SQLite. The LLM must filter active=1 and include the TENANT param.",
  "timestamp": "20260221T010120Z",
  "target_db": "sqlite",
  "ollama_model": "gpt-oss:latest",
  "expected": {
    "plan": {
      "SELECT": [
        {
          "expr": {
            "col": "companies.name"
          }
        },
        {
          "expr": {
            "col": "companies.industry"
          }
        }
      ],
      "FROM": {
        "table": "companies"
      },
      "WHERE": {
        "AND": [
          {
            "EQ": [
              {
                "col": "companies.tenant_id"
              },
              {
                "param": "TENANT"
              }
            ]
          },
          {
            "EQ": [
              {
                "col": "companies.active"
              },
              {
                "value": 1
              }
            ]
          }
        ]
      },
      "LIMIT": {
        "value": 10
      }
    },
    "plan_raw": "{\"SELECT\": [{\"expr\": {\"col\": \"companies.name\"}}, {\"expr\": {\"col\": \"companies.industry\"}}], \"FROM\": {\"table\": \"companies\"}, \"WHERE\": {\"AND\": [{\"EQ\": [{\"col\": \"companies.tenant_id\"}, {\"param\": \"TENANT\"}]}, {\"EQ\": [{\"col\": \"companies.active\"}, {\"value\": 1}]}]}, \"LIMIT\": {\"value\": 10}}",
    "sql": "SELECT \"companies\".\"name\", \"companies\".\"industry\"\nFROM \"companies\"\nWHERE (\"companies\".\"tenant_id\" = :TENANT) AND (\"companies\".\"active\" = :param_0)\nLIMIT 10",
    "params": {
      "param_0": 1,
      "TENANT": "acme"
    },
    "rows": [
      {
        "name": "Acme Corp",
        "industry": "Technology"
      }
    ],
    "row_count": 1,
    "error": null
  },
  "actual": {
    "plan": {
      "SELECT": [
        {
          "col": "companies.name"
        },
        {
          "col": "companies.industry"
        }
      ],
      "FROM": "companies",
      "WHERE": {
        "operator": "AND",
        "operands": [
          {
            "operator": "EQ",
            "operands": [
              {
                "col": "companies.tenant_id"
              },
              {
                "param": "TENANT"
              }
            ]
          },
          {
            "operator": "EQ",
            "operands": [
              {
                "col": "companies.active"
              },
              {
                "value": true
              }
            ]
          }
        ]
      },
      "LIMIT": 100
    },
    "plan_raw": "{\n  \"SELECT\": [\n    {\"col\": \"companies.name\"},\n    {\"col\": \"companies.industry\"}\n  ],\n  \"FROM\": \"companies\",\n  \"WHERE\": {\n    \"operator\": \"AND\",\n    \"operands\": [\n      {\n        \"operator\": \"EQ\",\n        \"operands\": [\n          {\"col\": \"companies.tenant_id\"},\n          {\"param\": \"TENANT\"}\n        ]\n      },\n      {\n        \"operator\": \"EQ\",\n        \"operands\": [\n          {\"col\": \"companies.active\"},\n          {\"value\": true}\n        ]\n      }\n    ]\n  },\n  \"LIMIT\": 100\n}",
    "sql": null,
    "params": null,
    "rows": null,
    "row_count": null,
    "error": "ParseError: QueryPlan structure is invalid: 6 validation errors for QueryPlan\nSELECT.0.expr\n  Field required [type=missing, input_value={'col': 'companies.name'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nSELECT.0.col\n  Extra inputs are not permitted [type=extra_forbidden, input_value='companies.name', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.12/v/extra_forbidden\nSELECT.1.expr\n  Field required [type=missing, input_value={'col': 'companies.industry'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nSELECT.1.col\n  Extra inputs are not permitted [type=extra_forbidden, input_value='companies.industry', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.12/v/extra_forbidden\nFROM\n  Input should be a valid dictionary or instance of FromClause [type=model_type, input_value='companies', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.12/v/model_type\nLIMIT\n  Input should be a valid dictionary or instance of LimitClause [type=model_type, input_value=100, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.12/v/model_type"
  },
  "comparison": {
    "brinkql_valid": false,
    "sql_match": false,
    "rows_match": false,
    "notes": "Ollama plan failed BrinkQL: ParseError: QueryPlan structure is invalid: 6 validation errors for QueryPlan\nSELECT.0.expr\n  Field required [type=missing, input_value={'col': 'companies.name'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nSELECT.0.col\n  Extra inputs are not permitted [type=extra_forbidden, input_value='companies.name', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.12/v/extra_forbidden\nSELECT.1.expr\n  Field required [type=missing, input_value={'col': 'companies.industry'}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.12/v/missing\nSELECT.1.col\n  Extra inputs are not permitted [type=extra_forbidden, input_value='companies.industry', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.12/v/extra_forbidden\nFROM\n  Input should be a valid dictionary or instance of FromClause [type=model_type, input_value='companies', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.12/v/model_type\nLIMIT\n  Input should be a valid dictionary or instance of LimitClause [type=model_type, input_value=100, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.12/v/model_type"
  }
}